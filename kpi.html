<!-- KPI Section Template (loaded dynamically into #kpiView) -->
<div id="kpiContent" class="kpi-view">

    <!-- KPI Header removed (moved to main header) -->

    <!-- Main KPI Layout: Triangle + Cards -->
    <div class="kpi-layout">

        <!-- Left: Triangle Chart -->
        <div class="kpi-triangle-area" style="position: relative;">
            <button class="kpi-data-edit-btn" id="kpiDataEditBtn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å KPI –¥–∞–Ω–Ω—ã–µ">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
                    <path d="m15 5 4 4" />
                </svg>
            </button>
            <div id="kpiTriangleContainer" class="triangle-chart-container">
                <!-- Rendered by kpi.js -->
            </div>
        </div>

        <!-- KPI Data Editor Modal -->
        <div class="kpi-data-modal-overlay" id="kpiDataModal">
            <div class="kpi-data-modal">
                <div class="kpi-data-modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ KPI</div>

                <!-- Year + Quarter selectors -->
                <div class="kpi-data-selectors">
                    <div class="kpi-data-sel-group">
                        <label>–ì–æ–¥</label>
                        <select id="kpiDataYear" class="kpi-data-select"></select>
                    </div>
                    <div class="kpi-data-sel-group">
                        <label>–ö–≤–∞—Ä—Ç–∞–ª</label>
                        <select id="kpiDataQuarter" class="kpi-data-select">
                            <option value="1">Q1</option>
                            <option value="2">Q2</option>
                            <option value="3">Q3</option>
                            <option value="4">Q4</option>
                        </select>
                    </div>
                </div>

                <!-- Monthly metrics table -->
                <div class="kpi-data-table" id="kpiDataTable">
                    <!-- Filled by JS -->
                </div>

                <div class="kpi-data-modal-actions">
                    <button class="kpi-data-modal-apply" id="kpiDataApply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    <button class="kpi-data-modal-cancel" id="kpiDataCancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- Right: Cards -->
        <div class="kpi-cards-area">

            <!-- Top row: Contributions + Grade -->
            <div class="kpi-cards-top-row">

                <!-- Contributions Card -->
                <div class="kpi-card kpi-contribution-card">
                    <div class="kpi-card-title">
                        –ü–û–°–õ–ï–î–ù–ò–ô –í–ö–õ–ê–î
                        <button class="kpi-open-all-btn">–í–°–ï –í–ö–õ–ê–î–´</button>
                    </div>
                    <div class="kpi-contrib-row">
                        <div class="kpi-contrib-col" style="flex: 2;">
                            <div class="kpi-contrib-field-label">–ö–æ–¥–æ–≤–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ</div>
                            <div class="kpi-contrib-field" id="kpiContribCode">–ö–û–î–û–í–û–ï –û–ë–û–ó–ù–ê–ß–ï–ù–ò–ï</div>
                        </div>
                        <div class="kpi-contrib-col" style="flex: 1;">
                            <div class="kpi-contrib-field-label">–î–∞—Ç–∞</div>
                            <div class="kpi-contrib-field" id="kpiContribDate" style="text-align: center;">--.--.----
                            </div>
                        </div>
                    </div>
                    <div class="kpi-contrib-field-label">–û–ø–∏—Å–∞–Ω–∏–µ</div>
                    <div class="kpi-contrib-field" id="kpiContribDesc">–û–ü–ò–°–ê–ù–ò–ï</div>
                </div>

                <!-- Grade Card -->
                <div class="kpi-card kpi-grade-card">
                    <div class="kpi-card-title" style="align-self: stretch;">–ú–û–ô –ì–†–ï–ô–î</div>
                    <button class="kpi-grade-edit-btn" id="kpiGradeEditBtn" title="–ò–∑–º–µ–Ω–∏—Ç—å –≥—Ä–µ–π–¥">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
                            <path d="m15 5 4 4" />
                        </svg>
                    </button>
                    <div class="kpi-grade-image-placeholder" id="kpiGradeImage">üéñÔ∏è</div>
                    <div class="kpi-grade-name" id="kpiGradeName">JUNIOR</div>
                    <div class="kpi-grade-next" id="kpiGradeNext">
                        –°–õ–ï–î.–ì–†–ï–ô–î: <span class="kpi-grade-next-value">JUNIOR+</span>
                    </div>
                </div>

                <!-- Grade Selector Modal -->
                <div class="kpi-grade-modal-overlay" id="kpiGradeModal">
                    <div class="kpi-grade-modal">
                        <div class="kpi-grade-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä–µ–π–¥</div>
                        <div class="kpi-grade-modal-grid" id="kpiGradeModalGrid">
                            <!-- filled by JS -->
                        </div>
                        <div class="kpi-grade-modal-actions">
                            <button class="kpi-grade-modal-cancel" id="kpiGradeModalCancel">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>


            </div>

            <!-- Transitions Card -->
            <div class="kpi-card kpi-transitions-card">
                <button class="kpi-transitions-edit-btn" id="kpiTransitionsEditBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
                        <path d="m15 5 4 4" />
                    </svg>
                </button>
                <div class="kpi-card-title">–ü–ï–†–ï–í–û–î–´ –ü–û –ì–†–ï–ô–î–£</div>
                <div id="kpiTransitionsBody"></div>
            </div>

            <!-- Transitions Settings Modal -->
            <div class="kpi-transitions-modal-overlay" id="kpiTransitionsModal">
                <div class="kpi-transitions-modal">
                    <div class="kpi-transitions-modal-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                    <div id="kpiTransitionsSettings">
                        <!-- Filled by JS -->
                    </div>
                    <div class="kpi-transitions-modal-actions">
                        <button class="kpi-data-modal-apply" id="kpiTransitionsApply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        <button class="kpi-data-modal-cancel" id="kpiTransitionsCancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>