/* ============================================================
   THEME SYSTEM — Dark Mode & Accent Colors
   Comprehensive overrides for all hardcoded colors in style.css
   ============================================================ */

/* ============ EXTENDED LIGHT THEME VARIABLES ============ */
:root {
    --card-bg: #f8f9fc;
    --border-color: rgba(0, 0, 0, 0.06);
    --input-bg: #f0f2f5;
    --hover-bg: rgba(0, 0, 0, 0.03);
    --modal-bg: #ffffff;
    --modal-overlay: rgba(0, 0, 0, 0.3);
    --table-border: #f0f0f0;
    --table-stripe: #f9f9f9;
    --table-hover: #f0f4ff;
    --badge-bg: #f0f2f5;
}

/* ============ DARK THEME ============ */
[data-theme="dark"] {
    /* Core palette — neutral gray, NOT blue */
    --bg-color: #1e1e1e;
    --block-bg: #252525;
    --shadow-light: rgba(0, 0, 0, 0);
    /* Zero visibility */
    --shadow-dark: rgba(0, 0, 0, 0.6);
    --text-primary: #e0e0e0;
    --text-secondary: #999;
    --card-bg: #2a2a2a;
    --border-color: rgba(255, 255, 255, 0.1);
    --input-bg: #1a1a1a;
    --hover-bg: rgba(255, 255, 255, 0.05);
    --modal-bg: #222222;
    --modal-overlay: rgba(0, 0, 0, 0.7);
    --table-border: #333;
    --table-stripe: rgba(255, 255, 255, 0.02);
    --table-hover: rgba(255, 255, 255, 0.05);
    --badge-bg: #333;

    /* RE-DEFINE NEU VARIABLES TO BE PURELY DARK IN DARK MODE */
    --neu-raised: 8px 8px 16px rgba(0, 0, 0, 0.5);
    --neu-pressed: inset 4px 4px 8px rgba(0, 0, 0, 0.5);
    --neu-flat: 4px 4px 8px rgba(0, 0, 0, 0.4);
    --neu-inset-small: inset 2px 2px 4px rgba(0, 0, 0, 0.5);
    --neu-raised-small: 3px 3px 6px rgba(0, 0, 0, 0.4);
    --neu-raised-extra-small: 2px 2px 4px rgba(0, 0, 0, 0.4);

    /* Keep accent the same */
    --accent-text: #c4d916;
}

/* =============================================
   BODY & GENERAL TEXT
   ============================================= */
[data-theme="dark"] body {
    color: var(--text-primary);
}

/* =============================================
   ALL #333 TEXT — headings, labels, names
   ============================================= */
[data-theme="dark"] .column-card h3,
[data-theme="dark"] .stats-row .value,
[data-theme="dark"] .project-name,
[data-theme="dark"] .projects-section h2,
[data-theme="dark"] .projects-table th,
[data-theme="dark"] .weekly-table thead,
[data-theme="dark"] .workload-sidebar h3,
[data-theme="dark"] .workload-sidebar .big-percentage,
[data-theme="dark"] .stat-card .stat-value,
[data-theme="dark"] .emergency-item .item-name,
[data-theme="dark"] .btn-add,
[data-theme="dark"] .btn-add-year,
[data-theme="dark"] .btn-export,
[data-theme="dark"] .btn-import,
[data-theme="dark"] h2,
[data-theme="dark"] h3,
[data-theme="dark"] h4 {
    color: var(--text-primary);
}

/* =============================================
   ALL #666 TEXT — secondary labels
   ============================================= */
[data-theme="dark"] .stat-label,
[data-theme="dark"] .stats-row .label,
[data-theme="dark"] .info-card label,
[data-theme="dark"] .project-loading,
[data-theme="dark"] .stat-card .stat-label,
[data-theme="dark"] .date-chip .remove-date,
[data-theme="dark"] .period-selector select,
[data-theme="dark"] .icon-arrow::before {
    color: var(--text-secondary);
}

/* =============================================
   EMPTY STATE (#999)
   ============================================= */
[data-theme="dark"] .empty-state {
    color: var(--text-secondary);
}

/* =============================================
   WHITE BACKGROUNDS → dark card
   ============================================= */
[data-theme="dark"] .column-card,
[data-theme="dark"] .loading,
[data-theme="dark"] .today-stat-card,
[data-theme="dark"] .date-chip {
    background: var(--card-bg);
    color: var(--text-primary);
}

/* =============================================
   #f8f9fa / #f0f0f0 BACKGROUNDS
   ============================================= */
[data-theme="dark"] .dates-container,
[data-theme="dark"] .emergency-item {
    background: var(--input-bg);
    color: var(--text-primary);
}

/* =============================================
   INFO CARD gradient → dark card
   ============================================= */
[data-theme="dark"] .info-card {
    background: var(--card-bg);
}

/* =============================================
   BORDERS — all #f0f0f0, #eee, #ddd, #e0e0e0
   ============================================= */
[data-theme="dark"] .stats-row,
[data-theme="dark"] .top-values {
    border-color: var(--table-border);
}

[data-theme="dark"] .period-selector {
    border-top-color: var(--table-border);
}

[data-theme="dark"] .date-chip {
    border-color: var(--table-border);
}

[data-theme="dark"] .add-date-row input {
    border-color: var(--table-border);
    background: var(--input-bg);
    color: var(--text-primary);
}

[data-theme="dark"] .export-import-group {
    border-top-color: var(--table-border);
}

[data-theme="dark"] .emergency-stat {
    background: rgba(214, 48, 49, 0.1);
    border-color: rgba(214, 48, 49, 0.3);
}

/* =============================================
   TABLES
   ============================================= */
[data-theme="dark"] .projects-table td,
[data-theme="dark"] .weekly-table td {
    border-bottom-color: var(--table-border);
    color: var(--text-primary);
}

[data-theme="dark"] .projects-table tbody tr:hover,
[data-theme="dark"] .weekly-table tbody tr:hover {
    background: var(--table-hover);
}

[data-theme="dark"] .weekly-table tbody tr:nth-child(even) {
    background: var(--table-stripe);
}

/* Table headers gradient → accent-aware */
[data-theme="dark"] .projects-table thead,
[data-theme="dark"] .weekly-table thead {
    background: var(--accent-gradient);
}

[data-theme="dark"] .projects-table th,
[data-theme="dark"] .weekly-table th {
    color: #1e1e1e;
}

[data-theme="dark"] .weekly-table tbody tr {
    background: var(--card-bg) !important;
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4) !important;
}

/* =============================================
   PERIOD SELECTOR
   ============================================= */
[data-theme="dark"] .period-selector select {
    background: var(--input-bg);
    color: var(--text-primary);
    border-color: var(--table-border);
}

[data-theme="dark"] .period-selector select:hover,
[data-theme="dark"] .period-selector select:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(227, 251, 30, 0.1);
}

/* =============================================
   PROGRESS BARS
   ============================================= */
[data-theme="dark"] .progress-bar {
    background: #333;
}

[data-theme="dark"] .workload-bar {
    background: #333;
}

[data-theme="dark"] .spinner {
    border-color: #333;
    border-top-color: var(--accent-color);
}

[data-theme="dark"] .loading-spinner {
    border-color: #444;
    border-top-color: var(--accent-color);
}

/* =============================================
   NEUMORPHIC ICONS — fix box-shadow
   ============================================= */
/* Global icon style removed to prevent conflicts with buttons */


/* FIX: Navigation buttons icons color */
[data-theme="dark"] .icon::before {
    background-color: currentColor;
}

/* Ensure the MASKED icon inside has the right color */
[data-theme="dark"] .icon::before {
    background-color: currentColor;
}

/* Specific button icons should maintain their text-secondary color unless hovered */
[data-theme="dark"] .nav-btn.icon,
[data-theme="dark"] .settings-btn.icon,
[data-theme="dark"] .icon-btn,
[data-theme="dark"] .close-modal {
    color: var(--text-secondary);
}

[data-theme="dark"] .nav-btn.icon:hover,
[data-theme="dark"] .settings-btn.icon:hover,
[data-theme="dark"] .icon-btn:hover,
[data-theme="dark"] .close-modal:hover {
    color: var(--accent-color);
}

/* BUT for .nav-btn.icon, the button itself has the mask? 
   Let's check style.css lines 2431+. 
   Actually style.css uses .icon-settings { mask-image: ... } 
   So if the element IS the icon (button.icon), background-color sets the icon color.
   BUT we just set background-color to var(--block-bg) for the BUTTON.
   Conflict! 
   The button needs a background color for the SHAPE, but mask-image uses background-color for CONTENT.
   
   Wait, style.css line 851 defines .nav-btn. 
   Line 2419 defines .header-icon-container .icon { background-color: #a0aec0 }
   
   If <button class="nav-btn icon icon-home"> is used:
   1. .nav-btn sets width/height/border-radius/bg-color(shape)
   2. .icon sets mask-size/repeat/position
   3. .icon-home sets mask-image
   
   IF styles apply mask to the button itself, the background-color of the button BECOMES the icon color.
   And the Shape background is lost (it becomes the icon color).
   
   Let's check if .nav-btn in style.css has a mask?
   No, .nav-btn has background: var(--bg-color).
   
   But .icon has mask attributes?
   style.css line 2419: .header-icon-container .icon {...}
   It does NOT say .icon { ... } globally.
   
   Let's check GLOBAL .icon style in style.css.
*/

[data-theme="dark"] .tile-icon.icon {
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] h3 .icon {
    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] h2 .icon {
    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);
}

/* =============================================
   TYPE BADGES — soften for dark
   ============================================= */
[data-theme="dark"] .type-number {
    background: rgba(25, 118, 210, 0.15);
}

[data-theme="dark"] .type-text {
    background: rgba(123, 31, 162, 0.15);
}

[data-theme="dark"] .type-boolean {
    background: rgba(56, 142, 60, 0.15);
}

[data-theme="dark"] .type-date {
    background: rgba(245, 124, 0, 0.15);
}

[data-theme="dark"] .type-empty {
    background: rgba(158, 158, 158, 0.15);
}

[data-theme="dark"] .badge-tasks {
    background: rgba(25, 118, 210, 0.15);
}

[data-theme="dark"] .badge-hours {
    background: rgba(245, 124, 0, 0.15);
}

[data-theme="dark"] .badge-count {
    background: rgba(123, 31, 162, 0.15);
}

/* =============================================
   COLUMN CARD accent stripe
   ============================================= */
[data-theme="dark"] .column-card::before {
    background: var(--accent-gradient);
}

/* =============================================
   MODALS & SETTINGS — comprehensive
   ============================================= */
[data-theme="dark"] .modal-overlay {
    background: var(--modal-overlay);
}

[data-theme="dark"] .modal {
    background: var(--modal-bg);
}

[data-theme="dark"] .modal-body {
    background: #252525 !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .modal.neu-raised {
    background: #252525;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
}

/* Settings modal accent stripe (::before) */
[data-theme="dark"] .modal::before,
[data-theme="dark"] .projects-section::before {
    opacity: 0.7;
}

/* HEADER ICON CONTAINER (Title Icon) */
[data-theme="dark"] .header-icon-container {
    background: transparent;
    box-shadow: none;
}

/* Close/icon buttons */
[data-theme="dark"] .icon-btn,
[data-theme="dark"] .close-modal {
    color: var(--text-secondary);
    background: transparent !important;
    border: none;
    box-shadow: none;
}

[data-theme="dark"] .icon-btn:hover,
[data-theme="dark"] .close-modal:hover {
    color: var(--text-primary);
    background: #444 !important;
}

/* =============================================
   DASHBOARD SPECIFIC
   ============================================= */
[data-theme="dark"] .workload-hours-block {
    background: var(--badge-bg) !important;
    color: var(--text-primary) !important;
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.5) !important;
}

[data-theme="dark"] .workload-hours-block .icon {
    color: var(--accent-text) !important;
}

[data-theme="dark"] .liquid-svg circle[stroke] {
    stroke: #333 !important;
}

/* Modal header */
[data-theme="dark"] .modal-header {
    background: #252525;
    border-bottom-color: #333;
}

[data-theme="dark"] .modal-header h3 {
    color: var(--text-primary);
}

/* Fix for white border set in style.css */
[data-theme="dark"] .modal {
    border-color: #333;
}

/* Settings tabs container */
[data-theme="dark"] .settings-tabs-container {
    background: #252525;
    border: none;
}

[data-theme="dark"] .settings-tabs {
    background: #1a1a1a;
    border: 1px solid #333;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Settings tab buttons */
[data-theme="dark"] .tab-btn {
    color: var(--text-secondary);
    background: transparent;
    box-shadow: none;
}

[data-theme="dark"] .tab-btn.active {
    color: var(--accent-text);
    /* Use accent color for text */
    background: #333;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
}


[data-theme="dark"] .tab-btn:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
}

/* User tab icon now inherits accent color */

/* Hardcoded color for calendar tab removed to support accent colors */


/* Form inputs within settings */
[data-theme="dark"] .form-input,
[data-theme="dark"] .form-input.dark-input,
[data-theme="dark"] select,
[data-theme="dark"] textarea,
[data-theme="dark"] input[type="text"] {
    background: #1a1a1a !important;
    color: #ffffff !important;
    border: 1px solid #444 !important;
}

[data-theme="dark"] .form-input:focus,
[data-theme="dark"] select:focus {
    border-color: var(--accent-color);
}

[data-theme="dark"] .settings-tab-content label,
[data-theme="dark"] .form-group label {
    color: var(--text-primary);
}

[data-theme="dark"] .form-input,
[data-theme="dark"] select,
[data-theme="dark"] textarea,
[data-theme="dark"] input[type="text"] {
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.5) !important;
}

[data-theme="dark"] .icon {
    box-shadow: none !important;
    background-color: transparent !important;
    color: var(--accent-color) !important;
}

[data-theme="dark"] .section-block h4 {
    color: var(--text-primary);
}

/* Date chips in settings */
[data-theme="dark"] .date-chip {
    background: #333;
    border-color: #444;
    color: var(--text-primary);
}

/* Tags list container */
[data-theme="dark"] .tags-list {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 8px;
}

[data-theme="dark"] .action-btn,
[data-theme="dark"] .btn-white {
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] .action-btn:hover,
[data-theme="dark"] .btn-white:hover {
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.5) !important;
}

/* Year selector */
[data-theme="dark"] .year-select {
    background: #1a1a1a;
    color: var(--text-primary);
}

/* Action buttons in settings */
[data-theme="dark"] .btn-white {
    background: #333;
    color: var(--text-primary);
    border: 1px solid #444;
}

[data-theme="dark"] .btn-red {
    color: #ff6b6b;
}

/* Accent button selection ring */
[data-theme="dark"] .accent-btn {
    border-color: #444 !important;
}

/* =============================================
   WORKLOAD ACCENT SUMMARY → keep gradient okay
   ============================================= */
[data-theme="dark"] .workload-summary,
[data-theme="dark"] .today-summary {
    background: var(--accent-gradient);
}

/* =============================================
   BUTTONS
   ============================================= */
[data-theme="dark"] .btn-lime,
[data-theme="dark"] .btn-lime-block {
    background: var(--accent-gradient);
}

/* Action buttons */
[data-theme="dark"] .action-btn {
    background: var(--card-bg);
    color: var(--text-primary);
}

/* =============================================
   NOTIFICATION TOAST
   ============================================= */
[data-theme="dark"] .notification-toast {
    background: var(--card-bg);
    color: var(--text-primary);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
}

/* =============================================
   CALENDAR — cells need border & contrast
   ============================================= */
[data-theme="dark"] .calendar-grid {
    gap: 8px;
}

[data-theme="dark"] .day-cell {
    background: #2a2a2a;
    border: 1px solid #3a3a3a;
    color: var(--text-primary);
    box-shadow: none;
}

[data-theme="dark"] .day-cell:hover {
    background: #333;
    border-color: #4a4a4a;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .day-cell.empty {
    background: transparent;
    border-color: transparent;
    box-shadow: none;
}

[data-theme="dark"] .day-cell.today {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px var(--accent-color);
    background: #2f2f2f;
}

[data-theme="dark"] .day-cell .day-number {
    color: var(--text-primary);
}

[data-theme="dark"] .day-cell.holiday .day-number {
    color: #ff6b6b;
}

[data-theme="dark"] .day-cell.short-day .day-number {
    color: #ffa502;
}

[data-theme="dark"] .week-number-cell {
    background: #2a2a2a;
    border: 1px solid #3a3a3a;
    color: var(--text-secondary);
}

[data-theme="dark"] .calendar-header-cell {
    color: var(--text-secondary);
}

[data-theme="dark"] .calendar-controls {
    background: #252525;
    border: 1px solid #333;
}

[data-theme="dark"] .calendar-select {
    background: #1a1a1a;
    color: var(--text-primary);
}

[data-theme="dark"] .calendar-nav-btn {
    background: #2a2a2a;
    border: 1px solid #3a3a3a;
    color: var(--text-secondary);
    box-shadow: none;
}

[data-theme="dark"] .calendar-nav-btn:hover {
    background: #333;
    color: var(--accent-color);
}

/* Calendar legend */
[data-theme="dark"] .calendar-legend {
    background: #252525;
    border: 1px solid #333;
    color: var(--text-secondary);
}

/* =============================================
   CONTRIBUTION CARDS
   ============================================= */
[data-theme="dark"] .contribution-card {
    background: var(--card-bg);
    color: var(--text-primary);
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4),
        -3px -3px 8px rgba(255, 255, 255, 0.01);
}

[data-theme="dark"] .contribution-card h4,
[data-theme="dark"] .contribution-card p,
[data-theme="dark"] .contribution-card .card-code {
    color: var(--text-primary);
}

[data-theme="dark"] .contribution-card .card-date {
    color: var(--text-secondary);
}

/* =============================================
   KPI CARDS
   ============================================= */
[data-theme="dark"] .kpi-card {
    background: var(--card-bg);
    color: var(--text-primary);
}

[data-theme="dark"] .kpi-card h3,
[data-theme="dark"] .kpi-card h4,
[data-theme="dark"] .kpi-card p,
[data-theme="dark"] .kpi-card span {
    color: var(--text-primary);
}

/* =============================================
   STAT CARDS (today stats)
   ============================================= */
/* =============================================
   STAT CARDS (today stats)
   ============================================= */
[data-theme="dark"] .today-tile {
    background: var(--card-bg);
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4),
        -3px -3px 8px rgba(255, 255, 255, 0.01);
}

[data-theme="dark"] .today-tile:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

/* =============================================
   DAY MODAL
   ============================================= */
[data-theme="dark"] .modal-header {
    border-bottom-color: var(--table-border);
}

[data-theme="dark"] .day-modal-stat {
    color: var(--text-primary);
}

[data-theme="dark"] .day-details-table td,
[data-theme="dark"] .day-details-table th {
    color: var(--text-primary);
    border-color: var(--table-border);
}

/* =============================================
   SCROLLBAR
   ============================================= */
[data-theme="dark"] ::-webkit-scrollbar-track {
    background: #1a1a1a;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: #444;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* =============================================
   CUSTOM DROPDOWN (contribution modal)
   ============================================= */
[data-theme="dark"] .custom-dropdown-trigger {
    background: var(--input-bg);
    color: var(--text-primary);
    border-color: var(--table-border);
}

[data-theme="dark"] .custom-dropdown-list {
    background: var(--card-bg);
    border-color: var(--table-border);
}

[data-theme="dark"] .custom-dropdown-option {
    color: var(--text-primary);
}

[data-theme="dark"] .custom-dropdown-option:hover {
    background: var(--hover-bg);
}

/* =============================================
   PROJECT MODAL OVERRIDES
   ============================================= */
[data-theme="dark"] .project-modal .modal {
    max-width: 800px;
}

/* ============ ACCENT COLORS ============ */

/* Lime (Default) — uses :root values */

/* Blue Accent */
[data-accent="blue"] {
    --accent-color: #0984e3 !important;
    --accent-dark: #0764ab !important;
    --accent-text: #0984e3 !important;
    --accent-gradient: linear-gradient(135deg, #0984e3 0%, #0764ab 100%) !important;
}

[data-accent="blue"][data-theme="dark"] {
    --accent-text: #4da6f0;
}

/* Purple Accent */
[data-accent="purple"] {
    --accent-color: #6c5ce7 !important;
    --accent-dark: #5240c4 !important;
    --accent-text: #6c5ce7 !important;
    --accent-gradient: linear-gradient(135deg, #6c5ce7 0%, #5240c4 100%) !important;
}

[data-accent="purple"][data-theme="dark"] {
    --accent-text: #a29bfe;
}

/* Orange Accent */
[data-accent="orange"] {
    --accent-color: #e17055 !important;
    --accent-dark: #c4533a !important;
    --accent-text: #e17055 !important;
    --accent-gradient: linear-gradient(135deg, #e17055 0%, #c4533a 100%) !important;
}

[data-accent="orange"][data-theme="dark"] {
    --accent-text: #fab1a0;
}

/* =============================================
   BLACK THEME NAVIGATION BUTTONS & ICONS (FINAL FIX)
   Redesigned to ensure round buttons with clean icons inside (::before)
   This block overrides any previous icon definitions for nav buttons.
   ============================================= */

/* 1. Base styles for Navigation Buttons (Theme Overrides) */
/* 1. Base styles for Navigation Buttons (Theme Overrides - High Visibility) */
[data-theme="dark"] .nav-btn,
[data-theme="dark"] .settings-btn {
    background-color: #3a3a3a !important;
    border-radius: 50% !important;
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.6),
        -3px -3px 8px rgba(255, 255, 255, 0.08) !important;
}

/* Hover state for buttons */
[data-theme="dark"] .nav-btn:hover,
[data-theme="dark"] .settings-btn:hover {
    background-color: #4a4a4a !important;
    transform: translateY(-2px) !important;
    box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.7),
        -4px -4px 10px rgba(255, 255, 255, 0.1) !important;
}

/* Active/Pressed state */
[data-theme="dark"] .nav-btn:active,
[data-theme="dark"] .settings-btn:active {
    box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.8) !important;
    transform: translateY(0) !important;
}

[data-theme="dark"] .kpi-open-all-btn {
    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.6),
        -2px -2px 6px rgba(255, 255, 255, 0.05) !important;
}

[data-theme="dark"] .kpi-open-all-btn:active {
    box-shadow: inset 3px 3px 6px rgba(0, 0, 0, 0.6),
        inset -2px -2px 4px rgba(255, 255, 255, 0.05) !important;
}

/* 2. Icon color rendering consistency */
[data-theme="dark"] .nav-btn::before,
[data-theme="dark"] .settings-btn::before {
    background-color: var(--text-secondary);
}

/* Hover state for the icon color */
[data-theme="dark"] .nav-btn:hover::before,
[data-theme="dark"] .settings-btn:hover::before {
    background-color: var(--accent-text);
}

/* Specific icon overrides removed to maintain consistency with global style.css definitions */

/* Fix Comment Delete Button in Dark Mode */
[data-theme="dark"] .delete-comment-btn {
    color: var(--text-primary);
    opacity: 0.8;
}

[data-theme="dark"] .delete-comment-btn:hover {
    color: #ff6b6b;
    /* Lighter red for dark mode */
    opacity: 1;
}

/* =============================================
   THEME SELECTION CARDS
   ============================================= */
.theme-selection-container {
    display: flex;
    gap: 16px;
    margin-top: 10px;
    margin-bottom: 25px;
}

.theme-card {
    flex: 1;
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    border-radius: 16px;
    padding: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.theme-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

.theme-card.active {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px var(--accent-color), 0 8px 20px rgba(0, 0, 0, 0.15);
}

/* Theme Previews - Mini Mockups */
.theme-preview {
    height: 100px;
    border-radius: 10px;
    margin-bottom: 12px;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
}

.preview-header {
    height: 12px;
    margin-bottom: 4px;
    flex-shrink: 0;
}

.preview-body {
    flex: 1;
    display: flex;
    gap: 4px;
    padding: 0 6px 6px 6px;
}

.preview-sidebar {
    width: 20px;
    border-radius: 4px;
}

.preview-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.preview-line {
    height: 6px;
    width: 80%;
    border-radius: 3px;
}

.preview-line.short {
    width: 40%;
}

.preview-card {
    flex: 1;
    border-radius: 6px;
}

/* Light Preview Specifics */
.light-preview {
    background: #f0f2f5;
}

.light-preview .preview-header {
    background: #ffffff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.light-preview .preview-sidebar {
    background: #ffffff;
}

.light-preview .preview-content .preview-line {
    background: #dde1e7;
}

.light-preview .preview-card {
    background: #ffffff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* Dark Preview Specifics */
.dark-preview {
    background: #1e1e1e;
}

.dark-preview .preview-header {
    background: #252525;
}

.dark-preview .preview-sidebar {
    background: #252525;
}

.dark-preview .preview-content .preview-line {
    background: #333;
}

.dark-preview .preview-card {
    background: #2a2a2a;
}

/* Accent Reflection in Previews */
.theme-card.active .preview-sidebar {
    background: var(--accent-color) !important;
    opacity: 0.2;
}

.theme-card.active .preview-card {
    border-top: 2px solid var(--accent-color);
}

/* Labels & Check Icon */
.theme-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 4px;
}

.theme-name {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
}

.theme-check {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--accent-color);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: scale(0);
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.theme-check::after {
    content: "✓";
    color: #fff;
    font-size: 12px;
    font-weight: bold;
}

[data-theme="dark"] .theme-check::after {
    color: #000;
}

[data-accent="blue"] .theme-check::after,
[data-accent="purple"] .theme-check::after,
[data-accent="orange"] .theme-check::after {
    color: #fff !important;
}

.theme-card.active .theme-check {
    opacity: 1;
    transform: scale(1);
}

/* =============================================
   ACCENT SELECTOR (CIRCLES)
   ============================================= */
.accent-selector-large {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-top: 10px;
}

.accent-btn-circle {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 3px solid var(--border-color);
    background: var(--card-bg);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    padding: 0;
}

.accent-btn-circle:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.accent-btn-circle.active {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px var(--accent-color);
    transform: scale(1.05);
}

.accent-btn-circle::before {
    content: "";
    position: absolute;
    inset: 4px;
    border-radius: 50%;
}

.accent-lime::before {
    background: linear-gradient(135deg, #E3FB1E 0%, #b8d618 100%);
}

.accent-blue::before {
    background: linear-gradient(135deg, #0984e3 0%, #0764ab 100%);
}

.accent-purple::before {
    background: linear-gradient(135deg, #6c5ce7 0%, #5240c4 100%);
}

.accent-orange::before {
    background: linear-gradient(135deg, #e17055 0%, #c4533a 100%);
}

/* =============================================
   CONTRIBUTION VIEW MODAL — DARK SUPPORT
   ============================================= */
[data-theme="dark"] #contributionViewModal .modal {
    background: #1e1e1e !important;
}

[data-theme="dark"] #contributionViewModal .modal-header {
    background: #252525 !important;
    border-bottom-color: #333 !important;
}

[data-theme="dark"] .view-block,
[data-theme="dark"] .view-description-wrapper,
[data-theme="dark"] .view-result-wrapper,
[data-theme="dark"] .history-section,
[data-theme="dark"] .comments-section {
    background: #2a2a2a !important;
    border-color: #333 !important;
    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] .history-section h3,
[data-theme="dark"] .comments-section h3 {
    color: var(--accent-text) !important;
}

[data-theme="dark"] .view-description-wrapper label,
[data-theme="dark"] .view-result-wrapper label {
    background: #2a2a2a !important;
}

[data-theme="dark"] .view-value {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .comment-item {
    background: #1a1a1a !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .comment-text {
    color: var(--text-primary) !important;
}

[data-theme="dark"] .comment-item.mine {
    background: #222d3a !important;
    /* Subtle blue-dark for own comments */
}

[data-theme="dark"] .comment-author {
    background: #333 !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .comment-input-area {
    background: #121212 !important;
    box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.6) !important;
    border: 1px solid #333 !important;
}

[data-theme="dark"] .comment-input {
    color: #fff !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

[data-theme="dark"] .btn-send-comment {
    background: var(--accent-color) !important;
    color: #000 !important;
    border: none !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] .btn-send-comment .icon {
    color: #000 !important;
}

[data-theme="dark"] .history-item {
    border-bottom-color: #333 !important;
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .modal-close {
    background: #333 !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .header-actions .action-btn {
    border-color: #333 !important;
    background: #2a2a2a !important;
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .header-actions .action-btn:hover {
    background: #333 !important;
    color: var(--text-primary) !important;
}